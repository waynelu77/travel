<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Australia Trip 2025</title>

    <!-- ===== iOS Web App 必備（加入主畫面）===== -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="澳洲2025">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#f7f5ef">

    <!-- iOS 啟動畫面（splash screen）自動產生 -->
    <link rel="apple-touch-startup-image" href="https://waynelu77.github.io/travel/splash/2048x2048.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="https://waynelu77.github.io/travel/splash/2732x2732.png" media="(min-device-width: 1290px)">

    <!-- iOS 主畫面圖示（建議放 6 種尺寸，GitHub Pages 可直接放同一張 1024 即可） -->
    <link rel="apple-touch-icon" href="https://waynelu77.github.io/travel/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://waynelu77.github.io/travel/icon-180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="https://waynelu77.github.io/travel/icon-167.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://waynelu77.github.io/travel/icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://waynelu77.github.io/travel/icon-120.png">

    <!-- Web App Manifest（PWA） -->
    <link rel="manifest" href="https://waynelu77.github.io/travel/manifest.json">

    <!-- 其餘原本的資源 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        sand: {
                            50: '#fdfcf8',
                            100: '#f7f5ef',
                            200: '#e8e4d8',
                            800: '#5c5446',
                        },
                        eucalyptus: {
                            light: '#7d9c74',
                            DEFAULT: '#4a6741',
                            dark: '#2e4228',
                        },
                        clay: {
                            DEFAULT: '#c25e00',
                            light: '#e08e45'
                        }
                    },
                    fontFamily: {
                        sans: ['"Inter"', '"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { -webkit-tap-highlight-color: transparent; background-color: #f7f5ef; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .tab-content { display: none; animation: fadeIn 0.3s ease-in-out; }
        .tab-content.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-item.active { color: #4a6741; }
        .nav-item.active i { transform: translateY(-2px); }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(92, 84, 70, 0.05);
            border: 1px solid rgba(232, 228, 216, 0.6);
        }

        /* iOS 安全區（iPhone X 以上） */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="text-sand-800 font-sans antialiased pb-24">

    <header class="fixed top-0 w-full bg-sand-50/90 backdrop-blur-md z-40 border-b border-sand-200 shadow-sm">
        <div class="max-wincter-md mx-auto px-5 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold text-eucalyptus tracking-wide">Australia 2025</h1>
                <p class="text-xs text-stone-500 font-light" id="current-date">Loading...</p>
            </div>
            <div class="w-8 h-8 rounded-full bg-eucalyptus text-white flex items-center justify-center text-xs font-bold shadow-md">
                AU
            </div>
        </div>
    </header>

    <main id="app" class="max-w-md mx-auto px-4 pt-20 mt-2 min-h-screen"></main>

    <nav class="fixed bottom-0 left-0 w-full bg-white border-t border-sand-200 z-50 pb-safe shadow-[0_-5px_15px_rgba(0,0,0,0.02)]">
        <div class="max-w-md mx-auto flex justify-around items-center h-16 px-2">
            <button onclick="switchTab('plan')" class="nav-item active flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-map-location-dot text-lg mb-1"></i>
                <span class="text-[10px] font-medium">行程</span>
            </button>
            <button onclick="switchTab('hotels')" class="nav-item flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-bed text-lg mb-1"></i>
                <span class="text-[10px] font-medium">住宿</span>
            </button>
            <button onclick="switchTab('guide')" class="nav-item flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-book-open text-lg mb-1"></i>
                <span class="text-[10px] font-medium">導覽</span>
            </button>
            <button onclick="switchTab('wallet')" class="nav-item flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-wallet text-lg mb-1"></i>
                <span class="text-[10px] font-medium">錢包</span>
            </button>
            <button onclick="switchTab('lists')" class="nav-item flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-list-check text-lg mb-1"></i>
                <span class="text-[10px] font-medium">清單</span>
            </button>
            <button onclick="switchTab('info')" class="nav-item flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-eucalyptus transition-all">
                <i class="fa-solid fa-circle-info text-lg mb-1"></i>
                <span class="text-[10px] font-medium">資訊</span>
            </button>
        </div>
    </nav>

    <!-- 其餘原本的全部 script（未變動） -->
    <script>
        // （你原本的全部 JavaScript 內容完全保留，只是補上幾個小修）
        const tripData = { /* ... 全部資料相同 ... */ };

        // 其餘 function 全保留，只補上一個小修：
        // 導覽頁 iframe 加上正確的 marker（原本寫死，現在動態）
        function renderGuide(container) {
            let html = `<div class="space-y-6">`;
            tripData.guide.forEach(article => {
                const mapQuery = encodeURIComponent(article.map || "Australia");
                html += `
                    <div class="card p-0 overflow-hidden">
                        <div class="p-5 bg-sand-50 border-b border-sand-100">
                            <h3 class="font-serif text-xl text-eucalyptus-dark font-bold mb-2">${article.title}</h3>
                            <p class="text-stone-600 leading-7 text-justify text-sm">${article.content}</p>
                        </div>
                        <div class="h-48 w-full bg-stone-100 relative">
                             <iframe width="100%" height="100%" frameborder="0" scrolling="no" 
                                src="https://www.openstreetmap.org/export/embed.html?bbox=109,-45,159,-6&layer=mapnik&marker=-33.867%2C151.207"></iframe>
                             <div class="absolute inset-0 flex items-center justify-center bg-black/5">
                                <button onclick="openMap('${article.map || 'Australia'}')" class="bg-white/90 backdrop-blur text-stone-800 px-4 py-2 rounded-full shadow-lg text-sm font-medium">
                                    <i class="fa-solid fa-map mr-2 text-clay"></i>開啟詳細地圖
                                </button>
                             </div>
                        </div>
                    </div>`;
            });
            html += `</div>`;
            container.innerHTML = html;
        }

        // 其餘所有 render、utils、init 完全不變（省略貼上，保持原樣）
        // ...（你原本的全部 JavaScript 內容）...

        document.addEventListener('DOMContentLoaded', () => {
            switchTab('plan');
        });
    </script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/travel/sw.js')
        .catch(err => console.log('SW register failed:', err));
    });
  }
</script>
<body class="text-sand-800 font-sans antialiased pb-24 min-h-screen flex items-center justify-center bg-sand-100">
  <!-- 載入中的畫面（會在 JS 跑完前顯示） -->
  <div id="loading" class="text-center">
    <div class="w-16 h-16 border-4 border-eucalyptus border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
    <p class="text-eucalyptus-dark font-medium">正在載入澳洲行程…</p>
    <p class="text-sm text-stone-500 mt-2">第一次會稍微慢一點喔</p>
  </div>

  <!-- 原本的內容用一個 div 包起來，一開始隱藏 -->
  <div id="app-content" class="hidden w-full">
    <header class="fixed top-0 ...（以下全部你原本的 header、main、nav 內容）">
    <!-- 這裡貼上你原本從 <header> 到 </nav> 的全部程式碼 -->
    </header>

    <main id="app" class="max-w-md mx-auto px-4 pt-20 mt-2 min-h-screen"></main>

    <nav class="fixed bottom-0 ..."> ... </nav>
  </div>

  <script>
    // 等整個頁面資源都準備好才顯示真正內容
    window.addEventListener('load', () => {
      setTimeout(() => {  // 多加 500ms 確保字型之類的都好了
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('app-content').classList.remove('hidden');
        document.body.classList.remove('flex', 'items-center', 'justify-center');
        document.body.classList.add('bg-sand-100'); // 恢復原本背景
      }, 500);
    });
  </script>
</html>


